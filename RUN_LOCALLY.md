# Как запустить бота локально для тестирования

## ⚠️ ВАЖНО: Остановите бота на сервере!

Перед локальным запуском **обязательно остановите бота на сервере**, иначе будет ошибка 409 Conflict.

### Остановка бота на сервере:

```bash
# На сервере выполните:
docker compose stop bot
# или
docker compose down
```

## Шаг 1: Активируйте виртуальное окружение

```bash
cd /Users/anna.sycheva/mamahelper
source venv/bin/activate
```

## Шаг 2: Установите зависимости (если еще не установлены)

```bash
pip install -r requirements.txt
```

## Шаг 3: Проверьте файл .env

Убедитесь, что файл `.env` существует и содержит правильные токены:

```bash
cat .env
```

Должны быть указаны:
- `TELEGRAM_BOT_TOKEN` - токен бота
- `PROVIDER_TOKEN` - токен провайдера платежей (для тестирования можно использовать тестовый)
- `ADMIN_USER_ID` - ваш user_id (опционально)

## Шаг 4: Запустите бота

```bash
python -m app.main
```

Бот запустится и начнет получать обновления через polling.

## Остановка бота

Нажмите `Ctrl+C` в терминале, где запущен бот.

## Просмотр логов

Логи записываются в файл `app/data/bot.log`:

```bash
# В другом терминале:
tail -f app/data/bot.log
```

## Важно

- Бот будет использовать локальную базу данных `app/data/bot.db`
- Все данные сохраняются локально
- Для остановки используйте `Ctrl+C`
- **Не запускайте бота локально и на сервере одновременно!**

## После тестирования

Когда закончите тестирование локально:

1. Остановите локальный бот (`Ctrl+C`)
2. Запустите бота на сервере:
   ```bash
   docker compose up -d
   ```
